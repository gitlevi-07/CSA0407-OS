#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>

#define BUFFER_SIZE 1024

int main() {
    char sourceFile[] = "source.txt";      // Source file name
    char destFile[] = "destination.txt";   // Destination file name
    char buffer[BUFFER_SIZE];
    int bytesRead, sourceFD, destFD;

    // Open source file in read-only mode
    sourceFD = open(sourceFile, O_RDONLY);
    if (sourceFD < 0) {
        perror("Error opening source file");
        return 1;
    }

    // Open/create destination file in write-only mode (with permissions)
    destFD = open(destFile, O_WRONLY | O_CREAT | O_TRUNC, 0644);
    if (destFD < 0) {
        perror("Error opening destination file");
        close(sourceFD);
        return 1;
    }

    // Read from source and write to destination
    while ((bytesRead = read(sourceFD, buffer, BUFFER_SIZE)) > 0) {
        write(destFD, buffer, bytesRead);
    }

    // Close file descriptors
    close(sourceFD);
    close(destFD);

    printf("File copy completed successfully.\n");
    return 0;
}
